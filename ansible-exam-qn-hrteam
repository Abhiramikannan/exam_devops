ansible-webserver/
â”œâ”€â”€ ansible.cfg                          # â† Step 2
â”œâ”€â”€ inventory/
â”‚   â””â”€â”€ hosts                            # â† Step 3
â”œâ”€â”€ group_vars/
â”‚   â””â”€â”€ all/
â”‚       â””â”€â”€ vault.yml                    # â† Step 10
â”œâ”€â”€ roles/
â”‚   â””â”€â”€ webserver/                       # â† Step 4
â”‚       â”œâ”€â”€ tasks/
â”‚       â”‚   â””â”€â”€ main.yml                 # â† Step 5
â”‚       â”œâ”€â”€ handlers/
â”‚       â”‚   â””â”€â”€ main.yml                 # â† Step 5
â”‚       â””â”€â”€ templates/
â”‚           â””â”€â”€ index.html.j2           # â† Step 6
â””â”€â”€ site.yml                             # â† Step 7


step1:  tree reponame

**Step 2: `ansible.cfg`**

ğŸ“„ **Path:** `ansible-webserver/ansible.cfg`
[defaults]
inventory = inventory/hosts
roles_path = roles


### ğŸ“¦ **Step 3: Inventory File**

ğŸ“„ **Path:** `ansible-webserver/inventory/hosts`
[webservers]
web1 ansible_host=192.168.1.10 ansible_user=ubuntu
web2 ansible_host=192.168.1.11 ansible_user=ubuntu

[webservers:vars]
env=staging

### âš™ï¸ **Step 4: Create Role**
cd ansible-webserver
ansible-galaxy init roles/webserver

### ğŸ“œ **Step 5: Tasks and Handlers**

ğŸ“„ **Tasks File:** `ansible-webserver/roles/webserver/tasks/main.yml`

- name: Install Apache
  apt:
    name: apache2
    state: present
    update_cache: yes
  tags: apache

- name: Copy dynamic homepage
  template:
    src: index.html.j2
    dest: /var/www/html/index.html
  notify: Restart Apache
  when: env == "staging"

- name: Start and enable Apache service
  service:
    name: apache2
    state: started
    enabled: yes



ğŸ“„ **Handlers File:** ansible-webserver/roles/webserver/handlers/main.yml
- name: Restart Apache
  service:
    name: apache2
    state: restarted




### ğŸ§© **Step 6: Jinja2 Template**

ğŸ“„ **Path:** `ansible-webserver/roles/webserver/templates/index.html.j2`
<html>
  <body>
    <h1>Welcome to {{ inventory_hostname }} in {{ env }} environment!</h1>
  </body>
</html>


### ğŸ—‚ï¸ **Step 7: Main Playbook**

ğŸ“„ **Path:** `ansible-webserver/site.yml`
- name: Apply Webserver Role
  hosts: webservers
  become: yes

  vars_files:
    - group_vars/all/vault.yml

  roles:
    - webserver

  tasks:
    - name: Ping all webservers
      ping:

    - name: Install curl
      apt:
        name: curl
        state: present



---

### ğŸ›¡ï¸ **Step 10: Vault File**

ğŸ“„ **Path:** `ansible-webserver/group_vars/all/vault.yml`

Create this file with encrypted variables using:
      ansible-vault create group_vars/all/vault.yml

      inside vault.yaml:
          env: staging

Then run the playbook with:
ansible-playbook site.yml --ask-vault-pass

Encrypt with:
          ansible-vault encrypt group_vars/all/vault.yml
Run with:
    ansible-playbook site.yml --ask-vault-pass





















































